name: release

# see https://repo1.maven.org/maven2/org/openjfx/javafx-base/17.0.7/ for classifiers to use for JavaFX libs

on:
  workflow_dispatch:

permissions:
  contents: read

jobs:
  build:
    name: Gradle
    uses: ./.github/workflows/gradle.yml
  release:
    needs: build
    name: create release
    runs-on: ubuntu-22.04
    env:
      GH_TOKEN: ${{ secrets.GH_TOKEN }}
    steps:
      - name: checkout
        uses: actions/checkout@v3
      - name: download artifacts
        uses: actions/download-artifact@v3
        with:
          path: artifacts
      - name: create release
        run: gh release create prerelease/v1.0.1-alpha --title "v1.0.1-alpha pre-release" --notes "this is a alpha pre-release" --prerelease
        #run: gh release create ${GITHUB_REF#refs/*/} -t ${GITHUB_REF#refs/*/} --generate-notes --prerelease
      - name: upload artfacts to release
        run: gh release upload prerelease/v1.0.1-alpha artifacts/*
        #run: gh release upload ${GITHUB_REF#refs/*/} 12_ft_chrome.zip 12_ft_firefox.zip
        